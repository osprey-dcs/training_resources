#if heat on and door closed +0.5
#if heat off and door closed -0.1
#if heat on and door open +0.1
#if heat off and door open -0.5
record(calc,"_$(P):heatrate")
{
    field(INPA, "$(P):heat_RBV CP")
    field(INPB, "$(P):door_RBV CP")
    field(INPC, "$(P):temperature_RBV")
    field(CALC, "A && (!B) ? 0.5 : A && B ? 0.1 : B && (!A) ? -0.5 : -0.1")
    field(PINI, "YES")
}
#Add heatrate to current temperature_RBV
#72F is the lower limit and 550F the upper
record(calc, "_$(P):tempcalc")
{
    field(INPA, "_$(P):heatrate")
    field(INPB, "_$(P):tempcalc")
    field(CALC, "A+B < 72 ? 72 : A+B > 550 ? 550 : A+B")
    field(SCAN, ".1 second")
}
record(ai, "$(P):temperature_RBV"){
    field(EGU, "F")
    field(INP, "_$(P):tempcalc CP")
}
record(ai, "$(P):tempdisplay_RBV"){
    field(EGU, "F")
    field(INP, "$(P):temperature_RBV CP")
    field(MDEL, "1")
}
record(bo, "$(P):heat"){
    field(ONAM, "ON")
    field(ZNAM, "OFF")
    field(VAL, "0")
    field(PINI, "YES")
}
record(bi, "$(P):heat_RBV"){
    field(INP, "$(P):heat CP")
    field(ONAM, "ON")
    field(ZNAM, "OFF")
}
record(bo, "$(P):door"){
    field(ONAM, "OPEN")
    field(ZNAM, "CLOSED")
    field(VAL, "0")
    field(PINI, "YES")
}
record(bi, "$(P):door_RBV"){
    field(ONAM, "OPEN")
    field(ZNAM, "CLOSED")
    field(INP, "$(P):door CP")  
}
record(bo, "$(P):fan"){
    field(ONAM, "ON")
    field(ZNAM, "OFF")
    field(VAL, "0")
    field(PINI, "YES")
}
record(bi, "$(P):fan_RBV"){
    field(ONAM, "ON")
    field(ZNAM, "OFF")
    field(INP, "$(P):fan CP")
}